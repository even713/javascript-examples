
<!DOCTYPE html>
<html>
  <head>
    <script src="/vendor/d3/d3.v3.js"></script>
    <style type="text/css">
      body, html {
        width: 100%;
        height: 100%;
        margin: 0;
      }
      svg {
        position: absolute;
        top: 0;
        left: 0;
      }
      p {
        text-align: center;
      }
    </style>
  </head>
  <body>
    <div class="container">
        <div class="chart">

        </div>
    </div>
  </body>
  <script type="text/javascript">
  window.onload = function(){
    var svg = d3.select(".container .chart")
      .append("svg")
      .attr("width", "100%")
      .attr("height", "100%")
      .append("g")

    var data = [
      {x: 5, y: 10, r: 2},
      {x: 14, y: 20, r: 8},
      {x: 35, y: 50, r: 5},
      {x: 58, y: 50, r: 3},
      {x: 20, y: 100, r: 12},
    ]

    // var gElement = svg.selectAll("g").data(data);
    //
    // gElement.exit().remove();
    //
    // gElement.enter().append("g")
    updateChart(data);
  }

  var data2 = [
    {x: 150, y: 10, r: 22},
    {x: 14, y: 20, r: 8},
    {x: 35, y: 50, r: 5},
    {x: 58, y: 50, r: 3},
    {x: 20, y: 100, r: 12}
  ];

  var data3 = [
    {x: 5, y: 10, r: 2},
    {x: 14, y: 20, r: 8},
    {x: 35, y: 50, r: 5},
    {x: 58, y: 50, r: 3},
    {x: 20, y: 100, r: 12},
    {x: 20, y: 300, r: 52}
  ]

  function updateChart(data) {
    const svg = d3.select(".container .chart svg");
    var circle = svg.selectAll("circle")
      .data(data);

    var removed = circle.exit().remove(); // removed is elements that removed

    var needUpdateCircles = circle;

    var needAddCircle = circle.enter().append("circle");

    svg.selectAll("circle")
    .attr("r", function(d){return d.r})
    .attr("cx", function(d) {
      return d.x; })
    .attr("cy", function(d) { return d.y; });
  }
  </script>
</html>
